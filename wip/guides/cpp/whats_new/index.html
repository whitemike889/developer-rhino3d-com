<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>What's New?</title>
  <meta name="description" content="This brief guide outlines the new and changed features in the Rhino C/C++ SDK.  Using C/C++">

  <!-- OpenGraph for Facebook, Twitter, Slack unfurling -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/guides/cpp/whats_new/" />
  <meta property="og:title" content="What's New?" />
  <meta property="og:description" content="This brief guide outlines the new and changed features in the Rhino C/C++ SDK." />
  <meta property=”og:site_name” content="developer.rhino3d.com"/>
  <meta property=”og:image” content="/wip/images/rhinodev_logo_unfurl.png"/>

  <!-- twitter card tags additive with the og: tags -->
  <meta name="twitter:domain" value="developer.rhino3d.com" />
  <meta name="twitter:title" value="What's New?" />
  <meta name="twitter:description" value="This brief guide outlines the new and changed features in the Rhino C/C++ SDK." />
  
    
      <meta name="twitter:image" content="/wip/images/rhinodev_logo_unfurl.png" />
    
  
  <meta name="twitter:url" value="http://developer.rhino3d.com" />
  
  <meta name="twitter:label1" value="Platform(s)" />
  <meta name="twitter:data1" value="Windows" />
  
  
  <meta name="twitter:label2" value="Language(s)" />
  <meta name="twitter:data2" value="C/C++" />
  

  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/github.min.css">
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/vbnet.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Overridden theme -->
  <link rel="stylesheet" href="/wip/css/main.css">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
  <!-- Bootstrap override -->
  <link rel="stylesheet" href="/wip/css/bootstrap-override.css">

  <link rel="canonical" href="http://developer.rhino3d.com/wip/guides/cpp/whats_new/">
  <link rel="alternate" type="application/rss+xml" title="Rhino Developer Docs" href="http://developer.rhino3d.com/wip/feed.xml" />

  <link rel="shortcut icon" href="http://developer.rhino3d.com/favicon.ico?v=2" />
  <!-- Saving bookmarks to mobile devices -->
  <!-- For non-Retina (@1× display) iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="/wip/images/apple-touch-icon-precomposed.png"><!-- 57×57px -->
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/wip/images/apple-touch-icon-72x72-precomposed.png">
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/wip/images/apple-touch-icon-76x76-precomposed.png">
  <!-- For iPhone with @2× display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/wip/images/apple-touch-icon-114x114-precomposed.png">
  <!-- For iPhone with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/wip/images/apple-touch-icon-120x120-precomposed.png">
  <!-- For iPad with @2× display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/wip/images/apple-touch-icon-144x144-precomposed.png">
  <!-- For iPad with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/wip/images/apple-touch-icon-152x152-precomposed.png">
  <!-- For iPhone 6 Plus with @3× display: -->
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/wip/images/apple-touch-icon-180x180-precomposed.png">
  <!-- For Chrome for Android: -->
  <link rel="icon" sizes="192x192" href="images/touch-icon-192x192.png">

  <!-- Diable crawling until this version is the stable version -->
  <meta name="robots" content="noindex" />
</head>


  <body>

    <!-- Google Tag Manager **This belongs right after the <body> tag**-->
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-MWMDKN"
        height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MWMDKN');
    </script>
    <!-- End Google Tag Manager -->


    
<div class="version-banner">
    Hey, you're viewing the <strong>wip</strong> version of this page!
    <a href="/guides/cpp/whats_new/">View the current version instead.</a>
</div>

<!-- Check the version banner for broken links and remove the link if found -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>
$(document).ready(function()
{
  var splitPath = window.location.pathname.split("/");
  var nonWipURL = "/" + splitPath.splice(2,splitPath.length-2).join("/");

  $.get(nonWipURL).fail(function ()
  {
    var $aTag = $("div.version-banner > a");
    $aTag.text("View the current site instead.");
    $aTag.attr("href", "/");
  });
});
</script>




    <div class="container">

      <header class="site-header">


    <a class="site-title" href="/wip/"><img src="/wip/images/rhinodevlogo148x128.png" alt="Rhino Developer Docs" height="48" width="56"></a><a class="site-title" href="/wip/">Rhino Developer Docs</a>

    <nav class="site-nav">
      <img class="menu-icon" src="/wip/images/gi.svg">
      
      <div class="trigger">
      	<!--<a class="page-link" href="/wip/">Welcome</a>-->
        <!-- get current page title and "collection" to figure out which nav
             link should be "active" -->
        
        
        
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
        
          
            
              
                
                  <a class="page-link active" href="/wip/guides/">Guides</a>
                
              
            
          
        
          
            
              
                
                  <a class="page-link" href="/wip/api/">API</a>
                
              
            
          
        
          
            
              
                
                  <a class="page-link" href="/wip/samples/">Samples</a>
                
              
            
          
        
          
            
          
        
          
            
              
                
                  <a class="page-link" href="/wip/videos/">Videos</a>
                
              
            
          
        
        <a class="page-link" href="http://discourse.mcneel.com/c/rhino-developer">Forums</a>
        <!-- Google Search Engine -->
        <!-- TODO Move to this site back into the Mcneel search, or use a simple site only search for results -->
        <div id="sitesearch">
            <!-- Google CSE Search Box Begins  -->
            <!-- Use of this code assumes agreement with the Google Custom Search Terms of Service. -->
            <!-- The terms of service are available at https://www.google.com/cse/docs/tos.html -->
            <form id="cref" action="/wip/search-results.html">
                <input type="hidden" name="cref" value="007988927381198593803:mcq6pshqsn8" />
                <input id="searchtext" type="text" name="q" size="24" value="" placeholder="search" />
                <input class="searchBox" type="submit" name="sa" size="2" value=" " />
            </form>
        <!-- Google CSE Search Box Ends -->
        </div>
        <!--End of Google Search Engine -->
      </div>
    </nav>

</header>


      <div class="page-content">
        <!--div class="wrapper"-->
          <div class="container-fluid">

<div class="row-fluid">
    <!--Nav Bar -->
    <nav class="col-xs-0 col-md-3 bs-docs-sidebar">
    <ul id="sidebar" class="nav nav-stacked fixed">

      <!-- Find the h1 handle and title -->
      <!-- 
      
      
      
      
      
      
      
      <li>
        <a href="#whats-new">What’s New?</a>

        <ul class="nav nav-stacked"> -->
          <!-- Find the h2 group and any h3 subgroups -->
          

          
            

            
              
              
              
              
              <li>
                <a href="#overview">Overview</a>

                

              </li>
            


          
            

            
              
              
              
              
              <li>
                <a href="#breaking-changes">Breaking Changes</a>

                
                  <ul class="nav nav-stacked">
                    

                    
                      
                      
                      
                      
                      
                      <li>
                          <a href="#multi-document-support">Multi-Document Support</a>
                      </li>
                    
                      
                      
                      
                      
                      
                      <li>
                          <a href="#model-components">Model Components</a>
                      </li>
                    
                      
                      
                      
                      
                      
                      <li>
                          <a href="#annotations">Annotations</a>
                      </li>
                    
                      
                      
                      
                      
                      
                      <li>
                          <a href="#scoped-and-strongly-typed-enums">Scoped and Strongly Typed...</a>
                      </li>
                    
                      
                      
                      
                      
                      
                      <li>
                          <a href="#deprecation">Deprecation</a>
                      </li>
                    
                      
                      
                      
                      
                      
                      <li>
                          <a href="#other">Other</a>
                      </li>
                    

                  </ul>
                

              </li>
            


          
            

            
              
              
              
              
              <li>
                <a href="#related-topics">Related Topics</a>

                

              </li>
            


          
        

        <!-- </ul>

      </li> -->

    </ul>
</nav>


    <!--Main Content -->
    <div class="col-xs-12 col-md-9">
      <!--<div class="post">-->

        <article class="post-content">
          <ol class="breadcrumb">
              
              
              
              <li><a href="/wip/guides/cpp">C/C++</a></li>
              
              <li class="active">Overview</li>
              
          </ol>

          <h1 id="whats-new">What’s New?</h1>

<p>This brief guide outlines the new and changed features in the Rhino C/C++ SDK.</p>

<h2 id="overview">Overview</h2>

<p>The Rhino C/C++ SDK is <em>not</em> an abstract SDK. That is, the native classes and functions that are made available in the SDK are also used internally by Rhino. Thus, when the signatures of classes or functions change, all developers, both internal and external, are required to modify their source code to accommodate for the change. For this reason, the Rhino C/C++ SDK was not broken between Rhino 4 and 5. In doing this, plug-ins that worked in Rhino 4 also worked in Rhino 5.</p>

<p>A lot of time has passed since the Rhino 4 C/C++ SDK was made available. And although there was quite a bit of new functionality added to Rhino 5, some of it required some <em>creative</em> programming in order not to break backwards compatibility with Rhino 4.</p>

<p>In order to continue to move Rhino forward, breaking changes needed to be made to the SDK. The following document attempts to describe what has been added, what has changed, and how to deal with these changes.</p>

<h2 id="breaking-changes">Breaking Changes</h2>

<p>Although the breaking changes may seem numerous, most fall within the following categories.</p>

<h3 id="multi-document-support">Multi-Document Support</h3>

<p>One of the primary goals for Rhino 6 was to consolidate the Rhino for Windows and Rhino for Mac source code into a single codebase. In order to do this, the source code had to become more multiple-document aware, as Rhino for Mac handle multiple documents. Note, Rhino 6 for Windows is still a single document application.</p>

<p>Thus, many SDK functions now require the developer to pass either a pointer or a reference to the active document or the active document’s runtime serial number.</p>

<p>An example of this is the <code>CRhinoDisplayConduit</code> class, which now requires the document serial number in which it will operate. In Rhino 5, you could enable a display conduit in a plug-in command as follows:</p>

<pre><code>    CMyDisplayConduit conduit;
    conduit.Enable();
    context.m_doc.Redraw();
</code></pre>

<p>In Rhino 6, you need to do the following:</p>

<pre><code>    CMyDisplayConduit conduit;
    conduit.Enable(context.m_doc.RuntimeSerialNumber());
    context.m_doc.Redraw();
</code></pre>

<p>A number of SDK functions have been modified to require some data from the active document. This is because SDK functions can no longer assume there is a single document.</p>

<p>An example of this is the <code>RhinoPointInPlanarClosedCurve</code> function, which now requires the absolute tolerance from the active document. In Rhino 5, you could use this function in a command as follows:</p>

<pre><code>    int rc = RhinoPointInPlanarClosedCurve(point, closed_curve, plane);
</code></pre>

<p>In Rhino 6, you will need to do the following:</p>

<pre><code>    double tolerance = context.m_doc.AbsoluteTolerance();
    int rc = RhinoPointInPlanarClosedCurve(point, closed_curve, plane, tolerance);
</code></pre>

<h3 id="model-components">Model Components</h3>
<p>Rhino has a number of model components, such as layers, group, render materials, dimensions style, and more. Over the years, common properties, such as name, index, and id, have been added to these components, but done so in an inconsistent manner. For example, the method for obtaining the id of a layer was different that of a render material.</p>

<p>The Rhino 6 C/C++ SDK contains a new <code>ON_ModelComponent</code> class that remedies this. Model component classes now inherit from this class.</p>

<p>Providing a consistent interface to common properties, however, means that the names of functions used to access these properties have change.</p>

<p>For example, in Rhino 5, you could access the name of the current Layer as follows:</p>

<pre><code>    const CRhinoLayer&amp; current_layer = context.m_doc.m_layer_table.CurrentLayer();
    ON_wString current_name = current_layer.LayerName();
</code></pre>

<p>In Rhino 6, you will need to do the following:</p>

<pre><code>    const CRhinoLayer&amp; current_layer = context.m_doc.m_layer_table.CurrentLayer();
    ON_wString current_name = current_layer.Name();
</code></pre>

<p>As another example, in Rhino 5, you could access the id of a Group as follows:</p>

<pre><code>    const CRhinoGroup* group = context.m_doc.m_group_table[0];
    if (group)
      ON_UUID group_id = group-&gt;m_group_id;
</code></pre>

<p>In Rhino 6, you will need to do the following:</p>

<pre><code>    const CRhinoGroup* group = context.m_doc.m_group_table[0];
    if (group)
      ON_UUID group_id = group-&gt;Id();
</code></pre>

<h3 id="annotations">Annotations</h3>

<p>For Rhino 6, there will be new implementations for all annotation objects, such as Text, Leaders, and Dimensions. The new implementations are much better organized the the prior versions, plus provide new features such as <a href="https://en.wikipedia.org/wiki/Rich_Text_Format">Rich Text</a>.</p>

<p>As of this writing, the new annotations were still in development. More information on the changes and how to migrate to the new annotation classes will be available as we get closer to freezing the SDK.</p>

<h3 id="scoped-and-strongly-typed-enums">Scoped and Strongly Typed Enums</h3>
<p>C++11 provides some great new features for C++ programmers. One such feature is scoped and strongly typed enumerations, which ensures some measure of compatibility across compilers. They also make up for some shortcomings of old-style enums:</p>

<ul>
  <li>Old-style enums do not have their own scope</li>
  <li>Old-style enums convert to integral types, which can lead to strange behavior</li>
  <li>You cannot specify the underlying integral type of an old-style enums</li>
</ul>

<p>There are a number of places in the Rhino 6 C/C++ SDK were old-style enums have been converted to scoped and strongly typed enums by convert <code>enum</code> declarations to <code>enum class</code>. Enumerators of these types of enums require a qualified name such as <em>enumname::enumerator</em> when you refer to them.</p>

<p>For example, in Rhino 5, you could specify a unit system in millimeters as follows:</p>

<pre><code>    ON_UnitSystem units(ON::millimeters);
</code></pre>

<p>In Rhino 6, you will need to do the following:</p>

<pre><code>    ON_UnitSystem units(ON::LengthUnitSystem::Millimeters);
</code></pre>

<h3 id="deprecation">Deprecation</h3>

<p>Obsolete functions from Rhino 5 are marked as deprecated with a message to help accomplish the same goal through alternate functions in the Rhino 6 SDK. These deprecations will generate compiler warnings when plug-in code attempts to call these functions.</p>

<p>Functions marked as deprecated may or may not continue to work in Rhino 6. Thus, you should replace all calls to deprecated functions with calls to their replacements before distributing any plug-in.</p>

<p>In Rhino 7, all functions marked as deprecated in Rhino 6 will be removed.</p>

<h3 id="other">Other</h3>
<p>Not all changes in the Rhino 6 C/C++ SDK could be tagged as deprecated. For example, if a member variable from a class were removed, or a feature was dramatically changed, then deprecation could not be used. These types of breakages will require more time to fix.</p>

<p>To help with this, we are working on updating all of the <a href="https://github.com/mcneel/Rhino6Samples_CPP">C++ SDK samples</a>.</p>

<h2 id="related-topics">Related Topics</h2>

<ul>
  <li><a href="/wip/guides/cpp/installing_tools_windows">Installing Tools (Windows)</a></li>
  <li><a href="/wip/guides/cpp/migrate_your_plugin_windows">Migrate your plugin project to Rhino 6</a></li>
  <li><a href="/wip/guides/general/migrate_your_plugin_manual_windows">Migrate your plugin project to Rhino 6 manually</a></li>
</ul>

        </article>

      <!--</div>-->

    </div>
</div>
</div>

        <!--/div-->
      </div>

      <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">

      
        <div class="row">
          <div class="col-md-4">
            <p class="text">Author: <a href="mailto:dale@mcneel.com, steve@mcneel.com">dale@mcneel.com, steve@mcneel.com</a></p>
          </div>
          <div class="col-md-4 text-center">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <a href="https://github.com/mcneel/developer-rhino3d-com/blob/wip/_guide_topics/cpp/whats_new.md" target="_blank">Edit page on GitHub</a>
          </div>
            <div class="col-md-4">
              <span class="pull-right">
                <span class="glyphicon glyphicon-cog"></span>&nbsp;<a href="/wip/admin">Admin</a>
              </span>
            </div>
        </div>

        <div class="row text-center">
          © 1997 - 2016 Robert McNeel &amp; Associates
        </div>

      

    </div>

  </div>

  <script>
    if (navigator.appVersion.indexOf("Win")!=-1)
    {
      var body = document.getElementsByTagName("body");
      body[0].style.fontWeight = '400';
    }
  </script>

</footer>

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <!-- MathJax -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/javascript">
    $('body').scrollspy({
        target: '.bs-docs-sidebar',
        offset: 150 /* fixed header is about 40px high */
    });
    </script>
  </body>

</html>
