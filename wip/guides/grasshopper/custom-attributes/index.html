<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Custom Attributes with C#, VB</title>
  <meta name="description" content="This guide contains a step-by-step walkthrough regarding custom object display.  Using C#, VB">

  <!-- OpenGraph for Facebook, Twitter, Slack unfurling -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/guides/grasshopper/custom-attributes/" />
  <meta property="og:title" content="Custom Attributes" />
  <meta property="og:description" content="This guide contains a step-by-step walkthrough regarding custom object display." />
  <meta property=”og:site_name” content="developer.rhino3d.com"/>
  <meta property=”og:image” content="/wip/images/rhinodev_logo_unfurl.png"/>

  <!-- twitter card tags additive with the og: tags -->
  <meta name="twitter:domain" value="developer.rhino3d.com" />
  <meta name="twitter:title" value="Custom Attributes" />
  <meta name="twitter:description" value="This guide contains a step-by-step walkthrough regarding custom object display." />
  
    
      <meta name="twitter:image" content="/wip/images/grasshopper_logo_unfurl.png" />
    
  
  <meta name="twitter:url" value="http://developer.rhino3d.com" />
  
  <meta name="twitter:label1" value="Platform(s)" />
  <meta name="twitter:data1" value="Windows, Mac" />
  
  
  <meta name="twitter:label2" value="Language(s)" />
  <meta name="twitter:data2" value="C#, VB" />
  

  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/github.min.css">
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/vbnet.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Overridden theme -->
  <link rel="stylesheet" href="/wip/css/main.css">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
  <!-- Bootstrap override -->
  <link rel="stylesheet" href="/wip/css/bootstrap-override.css">

  <link rel="canonical" href="http://developer.rhino3d.com/wip/guides/grasshopper/custom-attributes/">
  <link rel="alternate" type="application/rss+xml" title="Rhino Developer Docs" href="http://developer.rhino3d.com/wip/feed.xml" />

  <link rel="shortcut icon" href="http://developer.rhino3d.com/favicon.ico?v=2" />
  <!-- Saving bookmarks to mobile devices -->
  <!-- For non-Retina (@1× display) iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="/wip/images/apple-touch-icon-precomposed.png"><!-- 57×57px -->
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/wip/images/apple-touch-icon-72x72-precomposed.png">
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/wip/images/apple-touch-icon-76x76-precomposed.png">
  <!-- For iPhone with @2× display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/wip/images/apple-touch-icon-114x114-precomposed.png">
  <!-- For iPhone with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/wip/images/apple-touch-icon-120x120-precomposed.png">
  <!-- For iPad with @2× display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/wip/images/apple-touch-icon-144x144-precomposed.png">
  <!-- For iPad with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/wip/images/apple-touch-icon-152x152-precomposed.png">
  <!-- For iPhone 6 Plus with @3× display: -->
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/wip/images/apple-touch-icon-180x180-precomposed.png">
  <!-- For Chrome for Android: -->
  <link rel="icon" sizes="192x192" href="images/touch-icon-192x192.png">

  <!-- Diable crawling until this version is the stable version -->
  <meta name="robots" content="noindex" />
</head>


  <body>

    <!-- Google Tag Manager **This belongs right after the <body> tag**-->
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-MWMDKN"
        height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MWMDKN');
    </script>
    <!-- End Google Tag Manager -->


    
<div class="version-banner">
    Hey, you're viewing the <strong>wip</strong> version of this page!
    <a href="/guides/grasshopper/custom-attributes/">View the current version instead.</a>
</div>

<!-- Check the version banner for broken links and remove the link if found -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>
$(document).ready(function()
{
  var splitPath = window.location.pathname.split("/");
  var nonWipURL = "/" + splitPath.splice(2,splitPath.length-2).join("/");

  $.get(nonWipURL).fail(function ()
  {
    var $aTag = $("div.version-banner > a");
    $aTag.text("View the current site instead.");
    $aTag.attr("href", "/");
  });
});
</script>




    <div class="container">

      <header class="site-header">


    <a class="site-title" href="/wip/"><img src="/wip/images/rhinodevlogo148x128.png" alt="Rhino Developer Docs" height="48" width="56"></a><a class="site-title" href="/wip/">Rhino Developer Docs</a>

    <nav class="site-nav">
      <img class="menu-icon" src="/wip/images/gi.svg">
      
      <div class="trigger">
      	<!--<a class="page-link" href="/wip/">Welcome</a>-->
        <!-- get current page title and "collection" to figure out which nav
             link should be "active" -->
        
        
        
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
        
          
            
              
                
                  <a class="page-link active" href="/wip/guides/">Guides</a>
                
              
            
          
        
          
            
              
                
                  <a class="page-link" href="/wip/samples/">Samples</a>
                
              
            
          
        
          
            
          
        
          
            
              
                
                  <a class="page-link" href="/wip/videos/">Videos</a>
                
              
            
          
        
        <a class="page-link" href="http://discourse.mcneel.com/c/rhino-developer">Forums</a>
        <!-- Google Search Engine -->
        <!-- TODO Move to this site back into the Mcneel search, or use a simple site only search for results -->
        <div id="sitesearch">
            <!-- Google CSE Search Box Begins  -->
            <!-- Use of this code assumes agreement with the Google Custom Search Terms of Service. -->
            <!-- The terms of service are available at https://www.google.com/cse/docs/tos.html -->
            <form id="cref" action="/wip/search-results.html">
                <input type="hidden" name="cref" value="007988927381198593803:mcq6pshqsn8" />
                <input id="searchtext" type="text" name="q" size="24" value="" placeholder="search" />
                <input class="searchBox" type="submit" name="sa" size="2" value=" " />
            </form>
        <!-- Google CSE Search Box Ends -->
        </div>
        <!--End of Google Search Engine -->
      </div>
    </nav>

</header>


      <div class="page-content">
        <!--div class="wrapper"-->
          <div class="container-fluid">

<div class="row-fluid">
    <!--Nav Bar -->
    <nav class="col-xs-0 col-md-3 bs-docs-sidebar">
    <ul id="sidebar" class="nav nav-stacked fixed">

      <!-- Find the h1 handle and title -->
      <!-- 
      
      
      
      
      
      
      
      <li>
        <a href="#custom-attributes">Custom Attributes</a>

        <ul class="nav nav-stacked"> -->
          <!-- Find the h2 group and any h3 subgroups -->
          

          
            

            
              
              
              
              
              <li>
                <a href="#overview">Overview</a>

                

              </li>
            


          
            

            
              
              
              
              
              <li>
                <a href="#attributes-object">Attributes Object</a>

                

              </li>
            


          
            

            
              
              
              
              
              <li>
                <a href="#grasshopperkernelghattributes">Grasshopper.Kernel.GH_Att...</a>

                

              </li>
            


          
            

            
              
              
              
              
              <li>
                <a href="#layout">Layout</a>

                

              </li>
            


          
            

            
              
              
              
              
              <li>
                <a href="#render">Render</a>

                

              </li>
            


          
        

        <!-- </ul>

      </li> -->

    </ul>
</nav>


    <!--Main Content -->
    <div class="col-xs-12 col-md-9">
      <!--<div class="post">-->

        <article class="post-content">
          <ol class="breadcrumb">
              
              
              
              <li><a href="/wip/guides/grasshopper">Grasshopper</a></li>
              
              <li class="active">Advanced</li>
              
          </ol>

          <h1 id="custom-attributes">Custom Attributes</h1>

<p><span class="guide_byline">by <a href="https://discourse.mcneel.com/users/DavidRutten/activity">David Rutten</a></span></p>

<p>This guide contains a step-by-step walkthrough regarding custom object display.</p>

<h2 id="overview">Overview</h2>

<p>Objects on the Grasshopper canvas consist of two parts.  The most important piece is the class that implements the <a href="/wip/api/grasshopper/html/T_Grasshopper_Kernel_IGH_DocumentObject.htm">IGH_DocumentObject</a> interface.  This interface provides the basic plumbing needed to make objects work within a Grasshopper node network.  The interface part of objects however is handled separately.  Every <code>IGH_DocumentObject</code> carries around an instance of a class that implements the <a href="/wip/api/grasshopper/html/T_Grasshopper_Kernel_IGH_Attributes.htm">IGH_Attributes</a> interface (indeed, every <code>IGH_DocumentObject</code> knows how to create its own stand-alone attributes) and it is this class that takes care of display, mouse interactions, popup menus, tooltips and so forth.</p>

<p>In this guide we’ll see how you can create your own attributes object.  Since it’s not possible to have an <code>IGH_Attributes</code> instance work on its own, we need an <code>IGH_DocumentObject</code> to tie it to.  For this guide we’ll assume we have a custom simple parameter (i.e. without persistent data) that holds integers.</p>

<h2 id="attributes-object">Attributes Object</h2>

<ul class="nav nav-pills">
  <li class="active"><a href="#cs" data-toggle="pill">C#</a></li>
  <li><a href="#vb" data-toggle="pill">VB.NET</a></li>
</ul>

<div class="tab-content">

  <pre class="tab-pane fade in active" id="cs"><code class="language-cs">public class MySimpleIntegerParameter : GH_Param&lt;Types.GH_Integer&gt;
{
  public MySimpleIntegerParameter() :
    base(new GH_InstanceDescription("Integer with stats", "Int(stats)",
                                    "Integer with basic statistics",
                                    "Params", "Primitive")) { }

  public override System.Guid ComponentGuid
  {
    get { return new Guid("{33D07726-8298-4104-9EBC-5398D8AD5421}"); }
  }
}
</code></pre>

  <pre class="tab-pane fade in" id="vb"><code class="language-vbnet">Public Class MySimpleIntegerParameter
  Inherits GH_Param(Of Types.GH_Integer)

  Public Sub New()
    MyBase.New(New GH_InstanceDescription("Integer with stats", "Int(stats)", "Integer with basic statistics", "Params", "Primitive"))
  End Sub

  Public Overrides ReadOnly Property ComponentGuid() As System.Guid
    Get
      Return New Guid("{33D07726-8298-4104-9EBC-5398D8AD5420}")
    End Get
  End Property
End Class
</code></pre>

</div>

<p>What we’ll do is create a special attributes object for this parameter which also displays the median and mean values of the collection of all integers.  We want to put this information below the parameter name, but inside the parameter box.  The first step here is to override the <code>CreateAttributes()</code> on <code>MySimpleIntegerParameter</code> and assign a new instance of our (yet to be written) attributes class:</p>

<ul class="nav nav-pills">
  <li class="active"><a href="#cs1" data-toggle="pill">C#</a></li>
  <li><a href="#vb1" data-toggle="pill">VB.NET</a></li>
</ul>

<div class="tab-content">

  <pre class="tab-pane fade in active" id="cs1"><code class="language-cs">public override void CreateAttributes()
{
  m_attributes = new MySimpleIntegerParameterAttributes(Me);
}
</code></pre>

  <pre class="tab-pane fade in" id="vb1"><code class="language-vbnet">Public Overrides Sub CreateAttributes()
  m_attributes = New MySimpleIntegerParameterAttributes(Me)
End Sub
</code></pre>

</div>

<p>That’s it, no more code is required inside the <code>MySimpleIntegerParameter</code> class.  This part at least is simple.  If you don’t override the <code>CreateAttributes()</code> method, then an instance of <a href="/wip/api/grasshopper/html/T_Grasshopper_Kernel_Attributes_GH_FloatingParamAttributes.htm">GH_FloatingParamAttributes</a> will be created instead.  If your parameter is to be attached to a component as an input or output, then the component will assign an instance of <a href="/wip/api/grasshopper/html/T_Grasshopper_Kernel_Attributes_GH_LinkedParamAttributes.htm">GH_LinkedParamAttributes</a> to the parameter and <code>CreateAttributes()</code> will never be called.</p>

<h2 id="grasshopperkernelghattributes">Grasshopper.Kernel.GH_Attributes</h2>

<p>Although the <a href="/wip/api/grasshopper/html/T_Grasshopper_Kernel_IGH_Attributes.htm">IGH_Attributes</a> interface is required for custom attributes, it is usually a good idea to derive from one of the abstract attribute classes already available.  <a href="/wip/api/grasshopper/html/T_Grasshopper_Kernel_GH_Attributes_1.htm">GH_Attributes(T)</a> is the most basic and obvious choice and it implements a large amount of methods with default behaviour, saving you a lot of time and effort:</p>

<ul class="nav nav-pills">
  <li class="active"><a href="#cs2" data-toggle="pill">C#</a></li>
  <li><a href="#vb2" data-toggle="pill">VB.NET</a></li>
</ul>

<div class="tab-content">

  <pre class="tab-pane fade in active" id="cs2"><code class="language-cs">public class MySimpleIntegerParameterAttributes : GH_Attributes&lt;MySimpleIntegerParameter&gt;
{
  public MySimpleIntegerParameterAttributes(MySimpleIntegerParameter owner) : base(owner) { }
}
</code></pre>

  <pre class="tab-pane fade in" id="vb2"><code class="language-vbnet">Public Class MySimpleIntegerParameterAttributes
  Inherits GH_Attributes(Of MySimpleIntegerParameter)

  Public Sub New(ByVal owner As MySimpleIntegerParameter)
    MyBase.New(owner)
  End Sub
End Class
</code></pre>

</div>

<p>This is enough so far to make it work, even though all the logic is still standard.  We need to start overriding methods in <code>MySimpleIntegerParameterAttributes</code> to suit our needs.  But first some basic information regarding the default behaviour.</p>

<p><code>GH_Attributes&lt;T&gt;</code> assumes that the object that owns it is rectangular.  This is true for most objects in Grasshopper, but there are some notable exceptions such as Pie-Graphs, Sketches and Scribbles.  But this assumption (which holds true in our case) allows <code>GH_Attributes&lt;T&gt;</code> to supply basic functionality for a wide variety of methods.</p>

<p>All attributes have a property that defines the size of the object called <a href="/wip/api/grasshopper/html/P_Grasshopper_Kernel_IGH_Attributes_Bounds.htm">Bounds</a>.  Basically everything that happens outside of the <code>Bounds</code> goes by unnoticed.  Also, if the Bounds rectangle is not visible within the canvas area, Grasshopper might decide to not even bother calling any painting methods.</p>

<p>Because our parameter will be rectangular, we don’t have to override any of the picking logic, as the default implementation of <a href="/wip/api/grasshopper/html/Overload_Grasshopper_Kernel_GH_Attributes_1_IsPickRegion.htm">IsPickRegion</a>, <a href="/wip/api/grasshopper/html/M_Grasshopper_Kernel_GH_Attributes_1_IsMenuRegion.htm">IsMenuRegion</a> and <a href="/wip/api/grasshopper/html/M_Grasshopper_Kernel_GH_Attributes_1_IsTooltipRegion.htm">IsTooltipRegion</a> will already work.</p>

<h2 id="layout">Layout</h2>

<p>We do however need to supply custom Layout logic.  The width of our attributes depends on both the length of the <code>NickName</code> of the <code>MySimpleIntegerParameter</code> that owns these attributes <em>and</em> on the length of the statistics information we want to include.  The height of the parameter however is fixed, though larger than the standard height for parameters in Grasshopper.</p>

<p>In order to supply custom layout logic, we need to override the <a href="/wip/api/grasshopper/html/M_Grasshopper_Kernel_GH_Attributes_1_Layout.htm">Layout</a> method.  In this case I measure the width of the <code>NickName</code> of the Owner object, and make sure the parameter is never narrower than 80 pixels:</p>

<ul class="nav nav-pills">
  <li class="active"><a href="#cs3" data-toggle="pill">C#</a></li>
  <li><a href="#vb3" data-toggle="pill">VB.NET</a></li>
</ul>

<div class="tab-content">

  <pre class="tab-pane fade in active" id="cs3"><code class="language-cs">protected override void Layout()
{
  // Compute the width of the NickName of the owner (plus some extra padding),
  // then make sure we have at least 80 pixels.
  int width = GH_FontServer.StringWidth(Owner.NickName, GH_FontServer.Standard);
  width = Math.Max(width + 10, 80);

  // The height of our object is always 60 pixels
  int height = 60;

  // Assign the width and height to the Bounds property.
  // Also, make sure the Bounds are anchored to the Pivot
  Bounds = new RectangleF(Pivot, new SizeF(width, height));
}
</code></pre>

  <pre class="tab-pane fade in" id="vb3"><code class="language-vbnet">Protected Overrides Sub Layout()
  'Compute the width of the NickName of the owner (plus some extra padding),
  'then make sure we have at least 80 pixels.
  Dim width As Int32 = GH_FontServer.StringWidth(Owner.NickName, GH_FontServer.Standard)
  width = Math.Max(width + 10, 80)

  'The height of our object is always 60 pixels
  Dim height As Int32 = 60

  'Assign the width and height to the Bounds property.
  'Also, make sure the Bounds are anchored to the Pivot
  Bounds = New RectangleF(Pivot, New SizeF(width, height))
End Sub
</code></pre>

</div>

<p>The <code>Pivot</code> is a <code>PointF</code> structure that is changed when the object is dragged.  It is therefore important that you always “anchor” the layout of some attributes to the <code>Pivot</code>.  If you fail to do so, your attributes will become undraggable.</p>

<p>There is a method you can override that will be called prior to the call to <code>Layout</code> which can be used to destroy any cached data you might have that’s to do with display.  But note that if you override <a href="/wip/api/grasshopper/html/M_Grasshopper_Kernel_GH_Attributes_1_ExpireLayout.htm">ExpireLayout</a> you <em>must</em> place a call to the base class method as well:</p>

<ul class="nav nav-pills">
  <li class="active"><a href="#cs4" data-toggle="pill">C#</a></li>
  <li><a href="#vb4" data-toggle="pill">VB.NET</a></li>
</ul>

<div class="tab-content">

  <pre class="tab-pane fade in active" id="cs4"><code class="language-cs">publicoverride void ExpireLayout()
{    
  base.ExpireLayout();

  // Destroy any data you have that becomes
  // invalid when the layout expires.
}
</code></pre>

  <pre class="tab-pane fade in" id="vb4"><code class="language-vbnet">Public Overrides Sub ExpireLayout()
  MyBase.ExpireLayout()

  'Destroy any data you have that becomes
  'invalid when the layout expires.
End Sub
</code></pre>

</div>

<h2 id="render">Render</h2>

<p>Now that we have handled the Layout, we need to override the display of the parameter.  There’s two parts to doing so.  You always have to override the <a href="/wip/api/grasshopper/html/M_Grasshopper_Kernel_GH_Attributes_1_Render.htm">Render</a> method, as this is where the drawing takes place.  Render is called a number of times as there are several “layers” or “channels” to a single Grasshopper canvas.  At first, the background of the canvas is drawn.  During this process attributes are not yet involved.  Then there will be four channels where <code>IGH_Attributes</code> will be allowed to draw various shapes.</p>

<p>First the groups are drawn (as they are behind all other objects), but every <code>GH_Attributes.Render()</code> method will be called once for the <a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_CanvasChannel.htm">Groups</a> channel.  Typically you should not draw anything in the Groups channel.</p>

<p>Next up is the <a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_CanvasChannel.htm">Wires</a> channel where all parameter connector wires are drawn.  If your object has input parameters or is a parameter, it is your responsibility to draw all wires coming into your object.  Wires going out the right side will be drawn by the recipient objects.</p>

<p>Next the actual Components and Parameters themselves are drawn inside the <a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_CanvasChannel.htm">Objects</a> channel.  This is typically the most work, though there are lots of classes that take care of common tasks.  The default visual style of Components and parameter objects is the shiny, rounded rectangle.  You can use the <a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_Capsule.htm">GH_Capsule</a> type to draw these shapes with a minimum of fuss.</p>

<p>Ultimately there’s an <a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_CanvasChannel.htm">Overlay</a> channel which is rarely used but it allows you to draw shapes that need to be on top of all other components and parameters.  After this, there are still more channels to do with canvas widgets, but <code>IGH_Attributes</code> are not involved here.</p>

<p>Inside our implementation of the <code>Render()</code> method, we need to draw the wires coming into the <code>MySimpleIntegerParameter</code>, then the parameter capsule, while taking care to assign the correct colours (grey for normal, green for selected, dark for disabled, orange for warnings and red for errors).  Finally we have to draw three lines of text on top of the capsule; the name of the owner, the median integer and the mean integer.  The important types involved here are:</p>

<ul>
  <li><a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_Canvas.htm">GH_Canvas</a></li>
  <li><a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_Painter.htm">GH_Painter</a></li>
  <li><a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_Palette.htm">GH_Palette</a></li>
  <li><a href="/wip/api/grasshopper/html/T_Grasshopper_Kernel_GH_RuntimeMessageLevel.htm">GH_RuntimeMessageLevel</a></li>
  <li><a href="/wip/api/grasshopper/html/T_Grasshopper_GUI_Canvas_GH_Capsule.htm">GH_Capsule</a></li>
  <li><a href="/wip/api/grasshopper/html/T_Grasshopper_Kernel_GH_FontServer.htm">GH_FontServer</a></li>
</ul>

<ul class="nav nav-pills">
  <li class="active"><a href="#cs5" data-toggle="pill">C#</a></li>
  <li><a href="#vb5" data-toggle="pill">VB.NET</a></li>
</ul>

<div class="tab-content">

  <pre class="tab-pane fade in active" id="cs5"><code class="language-cs">protected override void Render(GH_Canvas canvas, Graphics graphics, GH_CanvasChannel channel)
  // Render all the wires that connect the Owner to all its Sources.
  if (channel == GH_CanvasChannel.Wires)
  {
    RenderIncomingWires(canvas.Painter, Owner.Sources, Owner.WireDisplay);
    return;
  }

  // Render the parameter capsule and any additional text on top of it.
  if (channel == GH_CanvasChannel.Objects)
  {
    // Define the default palette.
    GH_Palette palette = GH_Palette.Normal;

    // Adjust palette based on the Owner's worst case messaging level.
    switch (Owner.RuntimeMessageLevel)
    {
      case GH_RuntimeMessageLevel.Warning:
        palette = GH_Palette.Warning;
        break;

      case GH_RuntimeMessageLevel.Error:
        palette = GH_Palette.Error;
        break;
     }

    // Create a new Capsule without text or icon.
    GH_Capsule capsule = GH_Capsule.CreateCapsule(Bounds, palette);

    // Render the capsule using the current Selection, Locked and Hidden states.
    // Integer parameters are always hidden since they cannot be drawn in the viewport.
    capsule.Render(graphics, Selected, Owner.Locked, true);

    // Always dispose of a GH_Capsule when you're done with it.
    capsule.Dispose();
    capsule = null;

    // Now it's time to draw the text on top of the capsule.
    // First we'll draw the Owner NickName using a standard font and a black brush.
    // We'll also align the NickName in the center of the Bounds.
    StringFormat format = New StringFormat();
    format.Alignment = StringAlignment.Center;
    format.LineAlignment = StringAlignment.Center;
    format.Trimming = StringTrimming.EllipsisCharacter;

    // Our entire capsule is 60 pixels high, and we'll draw
    // three lines of text, each 20 pixels high.
    RectangleF textRectangle = Bounds;
    textRectangle.Height = 20;

    // Draw the NickName in a Standard Grasshopper font.
    graphics.DrawString(Owner.NickName, GH_FontServer.Standard, Brushes.Black, textRectangle, format);


    // Now we need to draw the median and mean information.
    // Adjust the formatting and the layout rectangle.
    format.Alignment = StringAlignment.Near;
    textRectangle.Inflate(-5, 0);

    textRectangle.Y += 20;
    graphics.DrawString(String.Format("Median: {0}", Owner.MedianValue), _
                        GH_FontServer.StandardItalic, Brushes.Black, _
                        textRectangle, format);

    textRectangle.Y += 20;
    graphics.DrawString(String.Format("Mean: {0:0.00}", Owner.MeanValue), _
                        GH_FontServer.StandardItalic, Brushes.Black, _
                        textRectangle, format);

    // Always dispose of any GDI+ object that implement IDisposable.
    format.Dispose();
  }
}
</code></pre>

  <pre class="tab-pane fade in" id="vb5"><code class="language-vbnet">Protected Overrides Sub Render(ByVal canvas As GH_Canvas, ByVal graphics As Graphics, ByVal channel As GH_CanvasChannel)
  'Render all the wires that connect the Owner to all its Sources.
  If (channel = GH_CanvasChannel.Wires) Then
    RenderIncomingWires(canvas.Painter, Owner.Sources, Owner.WireDisplay)
    Return
  End If

  'Render the parameter capsule and any additional text on top of it.
  If (channel = GH_CanvasChannel.Objects) Then
    'Define the default palette.
    Dim palette As GH_Palette = GH_Palette.Normal

    'Adjust palette based on the Owner's worst case messaging level.
    Select Case Owner.RuntimeMessageLevel
      Case GH_RuntimeMessageLevel.Warning
        palette = GH_Palette.Warning

      Case GH_RuntimeMessageLevel.Error
        palette = GH_Palette.Error
    End Select

    'Create a new Capsule without text or icon.
    Dim capsule As GH_Capsule = GH_Capsule.CreateCapsule(Bounds, palette)

    'Render the capsule using the current Selection, Locked and Hidden states.
    'Integer parameters are always hidden since they cannot be drawn in the viewport.
    capsule.Render(graphics, Selected, Owner.Locked, True)

    'Always dispose of a GH_Capsule when you're done with it.
    capsule.Dispose()
    capsule = Nothing

    'Now it's time to draw the text on top of the capsule.
    'First we'll draw the Owner NickName using a standard font and a black brush.
    'We'll also align the NickName in the center of the Bounds.
    Dim format As New StringFormat()
    format.Alignment = StringAlignment.Center
    format.LineAlignment = StringAlignment.Center
    format.Trimming = StringTrimming.EllipsisCharacter

    'Our entire capsule is 60 pixels high, and we'll draw
    'three lines of text, each 20 pixels high.
    Dim textRectangle As RectangleF = Bounds
    textRectangle.Height = 20

    'Draw the NickName in a Standard Grasshopper font.
    graphics.DrawString(Owner.NickName, GH_FontServer.Standard, Brushes.Black, textRectangle, format)


    'Now we need to draw the median and mean information.
    'Adjust the formatting and the layout rectangle.
    format.Alignment = StringAlignment.Near
    textRectangle.Inflate(-5, 0)

    textRectangle.Y += 20
    graphics.DrawString(String.Format("Median: {0}", Owner.MedianValue), _
                        GH_FontServer.StandardItalic, Brushes.Black, _
                        textRectangle, format)

    textRectangle.Y += 20
    graphics.DrawString(String.Format("Mean: {0:0.00}", Owner.MeanValue), _
                        GH_FontServer.StandardItalic, Brushes.Black, _
                        textRectangle, format)

    'Always dispose of any GDI+ object that implement IDisposable.
    format.Dispose()
  End If
End Sub
</code></pre>

</div>

<p>Note that in this case I assume that <code>MySimpleIntegerParameter</code> has two ReadOnly properties called <code>MedianValue</code> and <code>MeanValue</code>.  I haven’t written those, as they are not within the scope of this guide.</p>

<p>If you have cached display objects (for whatever reason I don’t want to hear), a good place to ensure they are <a href="/wip/api/grasshopper/html/M_Grasshopper_Kernel_GH_Attributes_1_PrepareForRender.htm">PrepareForRender</a> method.  It is called once (and only once) just before any calls to <code>Render()</code>.  You do not need to call the overridden method as it is empty by default.</p>

        </article>

      <!--</div>-->

    </div>
</div>
</div>

        <!--/div-->
      </div>

      <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">

      
        <div class="row">
          <div class="col-md-4">

            <p class="text">
              
                Author: <a href="https://discourse.mcneel.com/users/DavidRutten/activity">David Rutten</a>
              
            </p>
          </div>
          <div class="col-md-4 text-center">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <a href="https://github.com/mcneel/developer-rhino3d-com/blob/wip/_guide_topics/grasshopper/custom-attributes.md" target="_blank">Edit page on GitHub</a>
          </div>
            <div class="col-md-4">
              <span class="pull-right">
                <span class="glyphicon glyphicon-cog"></span>&nbsp;<a href="/wip/admin">Admin</a>
              </span>
            </div>
        </div>

        <div class="row text-center">
          © 1997 - 2016 Robert McNeel &amp; Associates
        </div>

      

    </div>

  </div>

  <script>
    if (navigator.appVersion.indexOf("Win")!=-1)
    {
      var body = document.getElementsByTagName("body");
      body[0].style.fontWeight = '400';
    }
  </script>

</footer>

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <!-- MathJax -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/javascript">
    $('body').scrollspy({
        target: '.bs-docs-sidebar',
        offset: 150 /* fixed header is about 40px high */
    });
    </script>
  </body>

</html>
